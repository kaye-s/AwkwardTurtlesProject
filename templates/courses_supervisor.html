{% extends 'base.html' %}
{% block title %}Courses{% endblock %}

{% block content %}
<div class="course-page-container">
  <div class="d-flex justify-content-center align-items-center jumbotron jumbotron-fluid" style="background-image: url('/static/media/undraw.svg');">
    <div class="container text-white">
      <h1 class="display-2" style="font-family:sans-serif;">Quick Overview</h1>
      <div class="text-center" style="font-family:sans-serif;">
        <p class="lead w-75 mx-auto">Currently managing {{ courses|length }} course{{ courses|pluralize }}</p>
        <p>No section data currently available.</p>
      </div>
    
    </div>
  </div>
  <div class="d-flex text-white">
    <h1>Manage Courses</h1>
    <!-- Button to Create a New Course -->
      <button class="btn-grad3 mx-2" onclick="openModal()"><i class="fa-solid fa-folder-plus"></i></button>
    </div>

  <!-- Table for Displaying Courses -->
  <div class="table-wrapper">
    <div class="table-content">
        {% for course in courses %}
            <div class="custom-card">
              <p>{{ course.course_name }}</p>
              <p>{{ course.course_identifier }}</p>
              <p>{{ course.course_dept }}</p>
              <p>{{ course.course_credits }}</p>
              <!-- Edit and Delete Actions -->
              <div class="d-flex justify-content-center">
                <button class="btn btn-outline-dark mr-3 text-white" onclick="openModal('{{ course.course_id }}', '{{ course.course_name }}', '{{ course.course_identifier }}', '{{ course.course_dept }}', '{{ course.course_credits }}')"><i class="fa-solid fa-pen-nib"></i></button>
                <form method="post" action="{% url 'delete-course' course.course_id %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-outline-danger"><i class="fa-solid fa-trash"></i></button>
                </form>
              </div>
            </div>
          {% endfor %}
      </div>
      <div>
        <div id="sec-message">
          <p class="w-50 mx-auto card bg-dark text-light text-center" style="font-family:Modern Antiqua;">Section Info</p>
          <em>Click on a course card to view its related sections</em>
        </div>
        <ol id="ol-sections" style="display: none;">
          <li class="card p-3 text-dark m-3">Section 001
            <div>
              Lecture hours
            </div>
          </li>
          <li class="card p-3 text-dark m-3">Section 002
            <div>
              Lecture hours
            </div>
          </li>
          <li class="card p-3 text-dark m-3">Section 003
            <div>
              Lecture hours
            </div>
          </li>
          <li class="card p-3 text-dark m-3">Section 004
            <div>
              Lecture hours
            </div>
          </li>
        </ol>
      </div>
  </div>
  <!-- Modal for Create/Edit Course -->
  <div id="courseModal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()"><i class="fa-regular fa-circle-xmark"></i></span>
      <h2 id="modalTitle">Create/Edit Course</h2>
      <form method="post" action="{% url 'create-course' %}" id="courseForm">
        {% csrf_token %}
        <input type="hidden" name="course_id" id="courseIdField" />
        <div>
          <label for="course_name">Course Name:</label>
          <input type="text" id="courseNameField" name="course_name" required />
        </div>
        <div>
          <label for="course_identifier">Course Identifier:</label>
          <input type="text" id="courseIdentifierField" name="course_identifier" required />
        </div>
        <div>
          <label for="course_dept">Department:</label>
          <input type="text" id="courseDeptField" name="course_dept" required />
        </div>
        <div>
          <label for="course_credits">Credits:</label>
        <input type="number" id="courseCreditsField" name="course_credits" required />
        </div>
        <button type="submit" class="btn-grad3 red-btn">Save</button>
      </form>
    </div>
  </div>

</div>

{% endblock %}
