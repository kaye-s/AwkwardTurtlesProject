{% extends 'base.html' %}
{% block title %}Courses{% endblock %}

{% block content %}
<div class="course-page-container">
  <div class="d-flex">
    <h1>Manage Courses</h1>

    <!-- Button to Create a New Course -->
      <button class="btn-grad3 mx-2" onclick="openModal()"><i class="fa-solid fa-folder-plus"></i></button>
    </div>

    <hr class="bg-white mx-2">

  <!-- Table for Displaying Courses -->
  <div class="table-wrapper">
    <div class="table-content">
      <div class="d-flex justify-content-between">
        <div class="heading">Course Name</div>
        <div class="heading">Course Id</div>
        <div class="heading">Department</div>
        <div class="heading">Credits</div>
        <div class="heading">Actions</div>
      </div>
        {% for course in courses %}
          <ol>
            <li class="d-flex justify-content-between align-items-center custom-card">
              <div>{{ course.course_name }}</div>
              <div>{{ course.course_identifier }}</div>
              <div>{{ course.course_dept }}</div>
              <div>{{ course.course_credits }}</div>
              <!-- Edit and Delete Actions -->
              <div class="d-flex justify-content-center">
                <button class="btn btn-dark mr-3" onclick="openModal('{{ course.course_id }}', '{{ course.course_name }}', '{{ course.course_identifier }}', '{{ course.course_dept }}', '{{ course.course_credits }}')"><i class="fa-solid fa-pen-nib"></i></button>
                <form method="post" action="{% url 'delete-course' course.course_id %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-outline-danger"><i class="fa-solid fa-trash"></i></button>
                </form>
              </div>
            </li>
          </ol>
          {% endfor %}
      </div>
  </div>
  <!-- Modal for Create/Edit Course -->
  <div id="courseModal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2 id="modalTitle">Create/Edit Course</h2>
      <form method="post" action="{% url 'create-course' %}" id="courseForm">
        {% csrf_token %}
        <input type="hidden" name="course_id" id="courseIdField" />
        <div>
          <label for="course_name">Course Name:</label>
          <input type="text" id="courseNameField" name="course_name" required />
        </div>
        <div>
          <label for="course_identifier">Course Identifier:</label>
          <input type="text" id="courseIdentifierField" name="course_identifier" required />
        </div>
        <div>
          <label for="course_dept">Department:</label>
          <input type="text" id="courseDeptField" name="course_dept" required />
        </div>
        <div>
          <label for="course_credits">Credits:</label>
        <input type="number" id="courseCreditsField" name="course_credits" required />
        </div>
        <button type="submit" class="btn-grad3 blue-btn">Save</button>
      </form>
    </div>
  </div>

</div>

{% endblock %}
